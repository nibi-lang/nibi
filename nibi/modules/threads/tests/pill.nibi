
(use "io" "threads")

(:= pill false)

(threads::fn busy [] [
  (loop (:= i 0) (eq false pill) (set i (+ i 1))
    (threads::sleep (threads::time::seconds 1)))
#  (while (eq false pill)
#     (threads::sleep (threads::time::seconds 1)))
])

(io::println "Starting...")

(:= tcell (threads::future (busy)))

(threads::sleep (threads::time::seconds 2))

(set pill true)

(threads::future::kill tcell)

(io::println "END")
