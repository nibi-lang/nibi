(use "io" "threads")

(fn busy [] [
  (loop (:= i 0) (< i 1000000000) (set i (+ i 1)) (nop))
  (<- 42)
])

(io::println "Starting...")

(:= tcell (threads::future (busy)))

(io::println "END")

# Here we are relying on the module destruction callback to cleanup threads
# that are still running
